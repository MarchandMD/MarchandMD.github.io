---
layout: post
published: true
title: to_params method and how it's used
tags: rails
#date: 2021-08-24 16:54:42 -0600
---

It's possible to pass an object (and nothing else) to a Rails route helper:

```rb
user_path(@user)
```

This will generate the URL for a request to:

```
/users/:id
```

The value of `:id` is dynamic, meaning it can be different, or it can change.

How does Rails get `:id` from the `@user` instance variable passed to `user_path`?

This is a good question because it's also possible to build the path helper like this:

```rb
user_path(id: @user.id)
```

But the first option is as valid as the second option.

So what's happening?

## How it works

Assuming User is an ActiveRecord model, the model has inherited from ActiveRecord::Base.

This means it would be possible to call `to_param`

```rb
@user.to_param
```

This returns the id of the object.

When Rails builds a route from a path helper, it will call `#to_param` on the object, if needed, to get the `:id`.

## Why this is important

Working with external data, it's not always relevant to build ActiveRecord models.

Often, it would make more sense to build an ActiveModel object.

ActiveModel objects are POROs. This means they don't inherit from anything. POROs do not inherit from ActiveRecord::Base.

Since a PORO does not inherit from ActiveRecord::Base, an instance of the object won't inherently have the `to_param` method available to it.

## How to define to_param

Within the PORO, simple define it:

```rb
def to_param
  # some code here
end
```

Usually an instance of the PORO will have some identifying id, object_id that can be used; refer to that. 